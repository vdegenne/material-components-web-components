import{b as c}from"../chunk-32HEDUCQ.js";var n=class extends HTMLElement{constructor(){super(),this.ready=new Promise(t=>{this.readyResolve=t})}static getParents(t,e=!1){let a=[];for(;t;){if(t.matches&&t.matches(n.tagName)){if(e&&t===e)break;d.hasConditions(t)&&a.push(t)}t=t.parentNode}return a}static async ready(t){let e=n.getParents(t);if(e.length===0)return;let a=await Promise.all(e.map(i=>i.wait()));if(a.length)return a[0]}forceFallback(){window.Island&&Object.assign(n.fallback,window.Island.fallback);for(let t in n.fallback){let e=Array.from(this.querySelectorAll(t)).reverse();for(let a of e){if(!a.isConnected||a.localName===n.tagName)continue;let i=n.ready(a);n.fallback[t](i,a,n.prefix)}}}wait(){return this.ready}async connectedCallback(){d.hasConditions(this)&&this.forceFallback(),await this.hydrate()}getTemplates(){return this.querySelectorAll(`template[${n.attr.template}]`)}replaceTemplates(t){for(let e of t){if(n.getParents(e,this).length>0)continue;let a=e.getAttribute(n.attr.template);if(a==="replace"){let i=Array.from(this.childNodes);for(let r of i)this.removeChild(r);this.appendChild(e.content);break}else{let i=e.innerHTML;if(a==="once"&&i){if(n.onceCache.has(i)){e.remove();return}n.onceCache.set(i,!0)}e.replaceWith(e.content)}}}async hydrate(){let t=[];this.parentNode&&t.push(n.ready(this.parentNode));let e=d.getConditions(this);for(let r in e)d.map[r]&&t.push(d.map[r](e[r],this));await Promise.all(t),this.replaceTemplates(this.getTemplates());let a,i=this.getAttribute(n.attr.import);if(i&&(a=await import(i)),a){let r=n.autoinit[this.getAttribute(n.attr.autoInitType)||i];r&&await r.call(this,a)}this.readyResolve(),this.setAttribute(n.attr.ready,""),this.querySelectorAll(`[${n.attr.defer}]`).forEach(r=>r.removeAttribute(n.attr.defer))}},o=n;c(o,"tagName","is-land"),c(o,"prefix","is-land--"),c(o,"attr",{autoInitType:"autoinit",import:"import",template:"data-island",ready:"ready",defer:"defer-hydration"}),c(o,"onceCache",new Map),c(o,"fallback",{":not(:defined):not([defer-hydration])":(t,e,a)=>{let i=document.createElement(a+e.localName);for(let s of e.getAttributeNames())i.setAttribute(s,e.getAttribute(s));let r=e.shadowRoot;if(!r){let s=e.querySelector(":scope > template:is([shadowrootmode], [shadowroot])");s&&(r=e.attachShadow({mode:"open"}),r.appendChild(s.content.cloneNode(!0)))}return r&&i.attachShadow({mode:r.mode}).append(...r.childNodes),i.append(...e.childNodes),e.replaceWith(i),t.then(()=>{i.shadowRoot&&e.shadowRoot.append(...i.shadowRoot.childNodes),e.append(...i.childNodes),i.replaceWith(e)})}}),c(o,"autoinit",{"petite-vue":function(t){t.createApp().mount(this)},vue:function(t){t.createApp().mount(this)},svelte:function(t){new t.default({target:this})},"svelte-ssr":function(t){new t.default({target:this,hydrate:!0})},preact:function(t){t.default(this)}});var l=class{static hasConditions(t){return Object.keys(l.getConditions(t)).length>0}static getConditions(t){let e={};for(let a of Object.keys(l.map))t.hasAttribute(`on:${a}`)&&(e[a]=t.getAttribute(`on:${a}`));return e}static visible(t,e){if("IntersectionObserver"in window)return new Promise(a=>{let i=new IntersectionObserver(r=>{let[s]=r;s.isIntersecting&&(i.unobserve(s.target),a())});i.observe(e)})}static idle(){let t=new Promise(e=>{document.readyState!=="complete"?window.addEventListener("load",()=>e(),{once:!0}):e()});return"requestIdleCallback"in window?Promise.all([new Promise(e=>{requestIdleCallback(()=>{e()})}),t]):t}static interaction(t,e){let a=["click","touchstart"];return t&&(a=(t||"").split(",").map(i=>i.trim())),new Promise(i=>{function r(s){i();for(let h of a)e.removeEventListener(h,r)}for(let s of a)e.addEventListener(s,r,{once:!0})})}static media(t){let e={matches:!0};if(t&&"matchMedia"in window&&(e=window.matchMedia(t)),!e.matches)return new Promise(a=>{e.addListener(i=>{i.matches&&a()})})}static saveData(t){return!("connection"in navigator)||navigator.connection.saveData===(t!=="false")?Promise.resolve():new Promise(()=>{})}},d=l;c(d,"map",{visible:l.visible,idle:l.idle,interaction:l.interaction,media:l.media,"save-data":l.saveData});"customElements"in window&&(window.customElements.define(o.tagName,o),window.Island=o);var m=o.ready;customElements.define("lit-island",class extends o{forceFallback(){}});
